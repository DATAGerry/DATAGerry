<div [formGroup]="form">
  <div class="form-row">
    <div class="form-group col-md-12">
      <label>Name: <span class="required">*</span></label>
      <input [(ngModel)]="data.name" [ngModelOptions]="{standalone: true}" (ngModelChange)="onNameChange($event)" type="text" class="form-control"
             name-guideline required [disabled]="mode === MODES.Edit" >
      <small class="form-text text-muted">Use a unique field-name</small>
    </div>
    <div class="form-group col-md-12">
      <label>Label: <span class="required">*</span></label>
      <input [(ngModel)]="data.label" type="text" class="form-control" required>
      <small class="form-text text-muted">a static display name</small>
    </div>
    <div class="form-group col-md-12">
      <label>Reference type: <span class="required">*</span></label>
      <cmdb-type-select [preload]="false" [autoLoad]="false" [loading]="loading" [value]="data.reference.type_id"
                        [types]="types" [totalTypes]="totalTypes"
                        (loadingStatusEmitter)="triggerAPICall()" (selectedChange)="onTypeChange($event)">
      </cmdb-type-select>
    </div>
    <div class="form-group col-md-6 col-sm-12" *ngIf="typeSections.length > 0 && data.reference.type_id">
      <label>Section: <span class="required">*</span></label>
      <ng-select [items]="typeSections" [searchable]="true" bindLabel="label"
                 [(ngModel)]="data.reference.section_name" (change)="onSectionChange($event)"
                 bindValue="name" placeholder="Select a section" required>
      </ng-select>
      <small class="text-muted">Select a section to display</small>
    </div>
    <div class="form-group col-md-6 col-sm-12" *ngIf="selectedSection">
      <label>Limit section output:</label>
      <ng-select [items]="selectedSection.fields" [multiple]="true" [searchable]="true"
                 [(ngModel)]="data.reference.selected_fields" placeholder="Limit to fields">
      </ng-select>
      <small class="text-muted">Leave empty for all fields.</small>
    </div>
  </div>
</div>

<div [formGroup]="form">
  <div class="form-row">
    <div class="form-group col-md-12">
      <label>Name: <span class="required">*</span></label>
      <input [formControl]="nameControl" (ngModelChange)="onNameChange($event); onInputChange($event, 'name')" type="text" class="form-control"
             name-guideline required [disabled]="mode === MODES.Edit"
             [ngClass]="{ 'is-valid': nameControl.valid && (nameControl.dirty || nameControl.touched),
                 'is-invalid': nameControl.invalid && (nameControl.dirty || nameControl.touched)}">
      <small class="form-text text-muted">Use a unique field-name</small>
    </div>
    <div class="form-group col-md-12">
      <label>Label: <span class="required">*</span></label>
      <input [formControl]="labelControl" (ngModelChange)="onInputChange($event, 'label')" type="text" class="form-control" required
             [ngClass]="{ 'is-valid': labelControl.valid && (labelControl.dirty || labelControl.touched),
                 'is-invalid': labelControl.invalid && (labelControl.dirty || labelControl.touched)}">
      <small class="form-text text-muted">a static display name</small>
    </div>
    <div class="form-group col-md-12">
      <label>Reference type: <span class="required">*</span></label>
      <cmdb-type-select [preload]="false" [autoLoad]="false" [loading]="loading" [value]="data.reference.type_id"
                        [types]="types" [totalTypes]="totalTypes"
                        (loadingStatusEmitter)="triggerAPICall()" (selectedChange)="onTypeChange($event)">
      </cmdb-type-select>
    </div>
    <div class="form-group col-md-6 col-sm-12" *ngIf="typeSections.length > 0 && data.reference.type_id">
      <label>Section: <span class="required">*</span></label>
      <ng-select [items]="typeSections" [searchable]="true" bindLabel="label" (change)="onSectionChange($event)"
                 bindValue="name" placeholder="Select a section">
      </ng-select>
      <small class="text-muted">Select a section to display</small>
    </div>
    <div class="form-group col-md-6 col-sm-12" *ngIf="selectedSection">
      <label>Limit section output:</label>
      <ng-select [items]="selectedSection.fields" [multiple]="true" [searchable]="true"
                 (change)="onSectionFieldsChange($event)" placeholder="Limit to fields">
      </ng-select>
      <small class="text-muted">Leave empty for all fields.</small>
    </div>
  </div>
</div>

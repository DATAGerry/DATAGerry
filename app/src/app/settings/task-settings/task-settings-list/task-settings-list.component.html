<cmdb-content-header [faIcon]="'cube'" title="Exportd Job List"></cmdb-content-header>

<table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-striped table-bordered">
  <thead>
  <tr>
    <th scope="col">ID</th>
    <th scope="col">State</th>
    <th scope="col">Name</th>
    <th scope="col">External Systems</th>
    <th scope="col">Running</th>
    <th scope="col">Last Execute Date</th>
    <th scope="col">Execute Job</th>
    <th scope="col">Action</th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let task of taskList | async">
    <th scope="row">{{task.public_id}}</th>
    <td><cmdb-active-badge [activeStatus]="task.active"></cmdb-active-badge></td>
    <td>{{task.label}}</td>
    <td>
      <ul>
        <li *ngFor="let des of task.destination">{{des.className}}</li>
      </ul>
    </td>
    <td>
      <div class="progress">
        <div [className]="task.running ? 'progress-bar progress-bar-striped progress-bar-animated' :'progress-bar bg-success'"
             role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 100%">
          {{task.running  ? "is running" : "done"}}
        </div>
      </div>
    </td>
    <td>{{task.last_execute_date.$date | date:"dd/MM/yy - hh:mm:ss"}}</td>
    <td>
      <button type="button" class="btn badge-pill btn-success"
              (click)="run_job_manual(task)">
        Run Now <fa-icon icon="play"></fa-icon>
      </button>
    </td>
    <td>
      <a class="ml-1 text-dark mr-1" [routerLink]="['/settings/exportdjob/edit/', task?.public_id]">
        <fa-icon [icon]="['far', 'edit']"></fa-icon>
      </a>
      <a class="ml-1 text-dark"><fa-icon [icon]="['far', 'trash-alt']" (click)="delTask(task?.public_id)"></fa-icon></a>
    </td>
  </tr>
  </tbody>
</table>

